(()=>{"use strict";var e={766:(e,t,s)=>{s.r(t)},953:(e,t,s)=>{s.r(t)},313:(e,t,s)=>{s.r(t)},81:(e,t,s)=>{s.r(t)},115:(e,t,s)=>{s.r(t)},785:(e,t,s)=>{s.r(t)},55:(e,t,s)=>{s.r(t)},22:(e,t,s)=>{s.r(t)},468:(e,t,s)=>{s.r(t)},756:(e,t,s)=>{s.r(t)},236:(e,t,s)=>{s.r(t)},620:(e,t,s)=>{s.r(t)},985:(e,t,s)=>{s.r(t)},446:(e,t,s)=>{s.r(t)},731:(e,t,s)=>{s.r(t)},518:(e,t,s)=>{s.r(t)},752:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const i=s(894);s(985);const a=s(577),r=s(863),o=s(977),c=s(738),l=s(560),h=s(637),d=s(535);t.App=class{constructor(e){this.rootElement=e,this.bestScorePage=new a.BestScorePage,this.indexDB=new c.DataBase(this.bestScorePage.scoreBlock),this.registrationPopup=new l.RegistrationPopup(this.indexDB),this.scorePopup=new d.ScorePopup,this.gamePage=new h.Game,this.aboutGamePage=new i.AboutGamePage,this.settingsPage=new r.SettingsPage,this.appPages=[this.aboutGamePage,this.bestScorePage,this.settingsPage,this.gamePage],this.rootChildren=[],this.header=new o.Header,this.currentUser=null,this.isGameStart=!1,this.appendComponents([this.header,this.scorePopup,this.aboutGamePage]),window.onpopstate=()=>{this.changeRoute()},this.loadStartRoute(),this.header.registerButton.element.addEventListener("click",(()=>{document.body.append(this.registrationPopup.element)})),this.registrationPopup.form.submitButton.element.addEventListener("click",(e=>{this.enterToAccount(e)}));const[t,s]=this.settingsPage.getSettingsMenu();t.addEventListener("change",(()=>this.gamePage.setCardType(t))),s.addEventListener("change",(()=>this.gamePage.setDifficulty(s))),this.header.stopGameButton.element.addEventListener("click",(()=>{this.stopGame()})),this.header.startGameButton.element.addEventListener("click",(()=>{this.gameCycle()}))}appendComponents(e){e.forEach((e=>{this.rootElement.append(e.element)})),this.rootChildren=this.rootChildren.concat(e)}removeComponent(){var e;null===(e=this.rootElement.lastElementChild)||void 0===e||e.remove(),this.rootChildren.pop()}loadStartRoute(){""!==window.location.hash&&"#start-game"!==window.location.hash||(window.location.hash="about-game"),this.header.clickOnNavButton(window.location.hash.slice(1)),this.changeRoute()}changeRoute(){const e=window.location.hash.slice(1),t=this.appPages.find((({name:t})=>t===e));t&&(t instanceof h.Game&&!this.currentUser?window.location.hash="about-game":("start-game"!==e&&this.currentUser&&this.isGameStart&&this.header.stopGameButton.element.click(),this.header.clickOnNavButton(e),this.removeComponent(),this.appendComponents([t])))}enterToAccount(e){return n(this,void 0,void 0,(function*(){e.preventDefault();const t=yield this.registrationPopup.form.submitForm();t&&(this.currentUser=t,this.header.showStartGameButton(),this.header.showUserAvatar(t.avatar),this.indexDB.sendDataToScoreBlock())}))}gameCycle(){return n(this,void 0,void 0,(function*(){this.isGameStart=!0,(yield this.gamePage.startGame())&&this.isGameStart&&(this.stopGame(),this.scorePopup.showPopup(this.gamePage.stopwatch.getTextContent()))}))}stopGame(){if(this.isGameStart=!1,!this.currentUser)return;const[e,t]=this.gamePage.stopGame(),s=100*e-10*t;this.currentUser.score=s>this.currentUser.score?s:this.currentUser.score,this.indexDB.addToScore(this.currentUser)}}},729:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=void 0,t.Canvas=class{constructor(){this.canvas=document.createElement("canvas"),this.context=null,this.context=this.canvas.getContext("2d")}getBase64File(e){const t=e.width>e.height?e.width/40:e.height/40;if(this.canvas.width=e.width/t,this.canvas.height=e.height/t,!this.context)return;this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.drawImage(e,0,0,this.canvas.width,this.canvas.height);const s=this.canvas.toDataURL("image/png");return s.slice(s.indexOf("base64,")+7)}}},351:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CardField=void 0;const i=s(460),a=s(343);s(766);class r extends i.BaseBlock{constructor(e="cats",t=4){super("div",["card-field"]),this.cardType=e,this.difficulty=t,this.activeCard=null,this.isActiveCard=!1,this.allPairs=0,this.correctPairs=0,this.allPairs=Math.pow(this.difficulty,2)/2}clear(){this.children=[],this.element.innerHTML="",this.correctPairs=0}getCards(){const e=[];for(let t=0;t<this.allPairs;t++)e.push(new a.Card(`./images/${this.cardType}/${t}.png`,this.difficulty)),e.push(new a.Card(`./images/${this.cardType}/${t}.png`,this.difficulty));return e.sort((()=>Math.random()-.5))}refreshCardField(){return n(this,void 0,void 0,(function*(){this.clear();const e=this.getCards();this.appendComponents(e),yield(30,new Promise((e=>{setTimeout(e,3e4)}))),e.forEach((e=>{e.rotateToFront()})),yield this.waitTransitionEnd(),e.forEach((e=>{e.element.addEventListener("click",(()=>{this.cardHandler(e)}))}))}))}waitTransitionEnd(){return new Promise((e=>{this.element.addEventListener("transitionend",(()=>e()),{once:!0})}))}cardHandler(e){return n(this,void 0,void 0,(function*(){if(!this.isActiveCard&&!e.getIsFind()&&e!==this.activeCard){if(!this.activeCard)return this.activeCard=e,void(yield e.rotateToBack());this.isActiveCard=!0,yield e.rotateToBack(),this.activeCard.path===e.path?(this.correctPairs++,yield Promise.all([this.activeCard.showCorrect(),e.showCorrect()])):(yield Promise.all([this.activeCard.showError(),e.showError()]),yield Promise.all([this.activeCard.rotateToFront(),e.rotateToFront()])),this.activeCard=null,this.isActiveCard=!1}}))}setCardType(e){this.cardType=e}setDifficulty(e){this.difficulty=e,this.allPairs=Math.pow(this.difficulty,2)/2}checkGameEnd(){return this.allPairs===this.correctPairs}getPairs(){return this.correctPairs}}t.CardField=r},343:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;const n=s(460),i=s(178);s(953);class a extends n.BaseBlock{constructor(e,t=4){super("div",["card-container"]),this.path=e,this.isFind=!1,this.card=new n.BaseBlock("div",["card","card_rotate"],[new i.BaseComponent("div",["card__side","card__side_result"]),new i.BaseComponent("div",["card__side","card__side_back"]),new i.BaseComponent("div",["card__side","card__side_front"])]),6===t&&this.element.classList.add("card-container_diff-6"),8===t&&this.element.classList.add("card-container_diff-8"),this.card.children[1].element.style.background=`center / contain no-repeat url(${this.path})`,this.appendComponents([this.card])}rotateToBack(){return this.rotate()}rotateToFront(){return this.rotate(!1)}rotate(e=!0){return new Promise((t=>{this.card.element.classList.toggle("card_rotate",e),this.card.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}showCorrect(){return new Promise((e=>{this.card.children[0].element.addEventListener("transitionend",(()=>e()),{once:!0}),this.card.children[0].element.classList.add("card__side_background-green"),this.isFind=!0}))}showError(){return new Promise((e=>{this.card.children[0].element.addEventListener("transitionend",(()=>{this.card.children[0].element.addEventListener("transitionend",(()=>e()),{once:!0}),this.card.children[0].element.classList.remove("card__side_background-red")}),{once:!0}),this.card.children[0].element.classList.add("card__side_background-red")}))}getIsFind(){return this.isFind}}t.Card=a},738:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataBase=void 0;const n=s(570);t.DataBase=class{constructor(e){this.output=e,this.iDB=window.indexedDB,this.dataBase=null,this.openRequest=this.iDB.open("mrkavalsky"),this.initUsers=[{avatar:n.defaultAvatarBase64,firstName:"Nicci",lastName:"Troiani",email:"nicci@gmail.com",score:456},{avatar:n.defaultAvatarBase64,firstName:"George",lastName:"Fields",email:"jack@gmail.com",score:358},{avatar:n.defaultAvatarBase64,firstName:"Jones",lastName:"Dermot",email:"dermot@gamil.com",score:211},{avatar:n.defaultAvatarBase64,firstName:"Jane",lastName:"Doe",email:"jane.doe@gmail.com",score:169}],this.currentUsers=this.initUsers,this.openRequest.onupgradeneeded=()=>{this.dataBase=this.openRequest.result;const e=this.dataBase.createObjectStore("players",{keyPath:"id",autoIncrement:!0});e.createIndex("firstName","firstName"),e.createIndex("lastName","lastName"),e.createIndex("email","email",{unique:!0}),e.createIndex("score","score")},this.openRequest.onsuccess=()=>{this.dataBase=this.openRequest.result,this.initUsers.forEach((e=>this.addNewUser(e))),this.sendDataToScoreBlock()}}addNewUser(e){this.dataBase&&this.dataBase.transaction("players","readwrite").objectStore("players").add(e)}sendDataToScoreBlock(){if(!this.dataBase)return;const e=[],t=this.dataBase.transaction("players","readonly"),s=t.objectStore("players").index("score").openCursor(null,"prev");s.onsuccess=()=>{const t=s.result;t&&(e.push(t.value),t.continue())},t.oncomplete=()=>{this.currentUsers=e,this.output.refreshScoreBlock(e.slice(0,10))}}findUser(e){return this.currentUsers.find((({email:t})=>t===e))}getID(){return this.currentUsers.length+1}addToScore(e){if(!this.dataBase)return;const t=this.dataBase.transaction("players","readwrite");t.objectStore("players").put(e),t.oncomplete=()=>{this.sendDataToScoreBlock()}}}},877:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileInput=void 0;const i=s(460),a=s(178);s(313);const r=n(s(522));class o extends i.BaseBlock{constructor(){super("label",["file-input"]),this.input=new a.BaseComponent("input",["file-input__input"]),this.imageSrc=null,this.reader=new FileReader,this.input.element.setAttribute("type","file"),this.input.element.setAttribute("accept","image/*"),this.input.element.addEventListener("change",(()=>{this.uploadFile()})),this.appendComponents([this.input]),this.reader.onload=()=>{"string"==typeof this.reader.result&&(this.imageSrc=this.reader.result)}}uploadFile(){const e=this.input.element.files;e&&this.reader.readAsDataURL(e[0])}getImage(){return new Promise((e=>{const t=new Image;this.imageSrc?t.src=this.imageSrc:t.src=r.default,this.imageSrc=null,t.addEventListener("load",(()=>{e(t)}),{once:!0})}))}}t.FileInput=o},368:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;const i=s(460),a=s(124),r=s(178),o=s(69);s(81);const c=s(877),l=s(729);class h extends i.BaseBlock{constructor(e){super("form",["form"]),this.output=e,this.inputsArray=[new o.Input("First Name","text"),new o.Input("Last Name","text"),new o.Input("E-mail","email")],this.submitButton=new a.BaseButton(["form__button","form__button_submit","form__button_submit_disable"],"add user"),this.cancelButton=new a.BaseButton(["form__button","form__button_cancel"],"cancel"),this.isFormValid=!1,this.errorField=new r.BaseComponent("div",["form__error-field"]),this.fileInput=new c.FileInput,this.canvas=new l.Canvas,this.appendComponents([new i.BaseBlock("div",["form__inputs-wrapper"],this.inputsArray),this.fileInput]),this.appendComponents([this.errorField,this.submitButton,this.cancelButton]),this.element.addEventListener("input",(()=>{this.validateForm()})),this.element.addEventListener("change",(()=>{this.validateForm()})),this.cancelButton.element.addEventListener("click",(e=>{this.closeForm(e)}))}validateForm(){this.isFormValid=!1,this.inputsArray.filter((e=>e.getIsValidate())).length===this.inputsArray.length?(this.submitButton.element.classList.remove("form__button_submit_disable"),this.isFormValid=!0):this.submitButton.element.classList.add("form__button_submit_disable")}clearDownForm(){this.inputsArray.forEach((e=>{e.clearDownInput()}))}closeForm(e){var t;e.preventDefault(),null===(t=document.body.lastElementChild)||void 0===t||t.remove(),this.clearDownForm(),this.errorField.element.innerText=""}submitForm(){var e;return n(this,void 0,void 0,(function*(){if(!this.isFormValid)return;const t=this.inputsArray.map((e=>e.getInputNode().value)),s=this.output.findUser(t[2])||(yield this.getNewUser(t));return this.checkUser(s,t)?(null===(e=document.body.lastElementChild)||void 0===e||e.remove(),this.clearDownForm(),s):void 0}))}getNewUser(e){return n(this,void 0,void 0,(function*(){const t=yield this.fileInput.getImage(),s={avatar:this.canvas.getBase64File(t),firstName:e[0],lastName:e[1],email:e[2],score:0,id:this.output.getID()};return this.output.addNewUser(s),s}))}checkUser({firstName:e,lastName:t},[s,n]){return e!==s||t!==n?(this.errorField.element.innerText="A user with this email address already exists",!1):(this.errorField.element.innerText="",!0)}}t.Form=h},977:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;const i=s(460),a=s(124),r=s(178),o=s(876);s(115);const c=n(s(522));class l extends i.BaseBlock{constructor(){super("header",["header"]),this.logoBlock=new r.BaseComponent("div",["logo"]),this.navMenu=new i.BaseBlock("nav",["header__nav-menu"]),this.stopGameButton=new a.BaseButton(["header__button","header__button_hidden"],"stop game"),this.navMenuButtons=[new o.NavButton(["header__nav-button"],"About Game"),new o.NavButton(["header__nav-button"],"Best Score"),new o.NavButton(["header__nav-button"],"Game Settings")],this.registerButton=new a.BaseButton(["header__button"],"Register New Player"),this.startGameButton=new o.NavButton(["header__button","header__button_hidden"],"start game"),this.userAvatar=new r.BaseComponent("img",["header__avatar","header__avatar_hidden"]),this.navMenu.appendComponents(this.navMenuButtons),this.logoBlock.element.innerHTML='\n      <div class="logo__part logo__part_blue">Match</div>\n      <div class="logo__part logo__part_white">Match</div>\n    ',this.startGameButton.element.addEventListener("click",(()=>{this.navMenu.children.forEach((e=>{e.element.classList.remove("header__nav-button_active")}))}));const e=new i.BaseBlock("div",["header__buttons-wrapper"],[this.registerButton,this.startGameButton,this.stopGameButton,this.userAvatar]);this.appendComponents([this.logoBlock,this.navMenu,e]),this.navMenuButtons.forEach((({element:e})=>{e.addEventListener("click",(()=>{this.navMenuButtons.forEach((e=>{e.element.classList.remove("header__nav-button_active")})),e.classList.add("header__nav-button_active")}))})),this.startGameButton.element.addEventListener("click",(()=>this.showStopGameButton())),this.stopGameButton.element.addEventListener("click",(()=>this.showStartGameButton()))}showStartGameButton(){this.registerButton.element.classList.add("header__button_hidden"),this.stopGameButton.element.classList.add("header__button_hidden"),this.startGameButton.element.classList.remove("header__button_hidden")}showStopGameButton(){this.startGameButton.element.classList.add("header__button_hidden"),this.stopGameButton.element.classList.remove("header__button_hidden")}clickOnNavButton(e){const t=this.navMenuButtons.concat([this.startGameButton]).find((({pageHash:t})=>t===e));t&&t.element.click()}showUserAvatar(e){this.userAvatar.element.src=e?`data:image/png;base64,${e}`:c.default,this.userAvatar.element.classList.remove("header__avatar_hidden")}}t.Header=l},69:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const n=s(460),i=s(178);s(785);class a extends n.BaseBlock{constructor(e,t){super("div",["input"]),this.caption=new i.BaseComponent("div",["input__caption"]),this.input=new i.BaseComponent("input",["input__field"]),this.error=new i.BaseComponent("div",["input__error"]),this.isValidate=!1,this.inputType=t,this.caption.element.innerText=e,this.input.element.setAttribute("type",t),this.showStartMessage(),this.appendComponents([this.caption,this.input,this.error]),this.input.element.addEventListener("input",(()=>{this.setError()})),this.input.element.addEventListener("change",(()=>{this.setError()}))}setError(){this.isValidate=!1,this.error.element.innerText="text"===this.inputType?this.validateTextInput():this.validateEmailInput()}validateTextInput(){var e;const t=this.getInputNode().value.trim(),s=this.caption.element.innerText.toLowerCase();return this.addTheErrorClass(),t.length>30?`!The ${s} cannot be more than 30 symbols`:0===t.length?`!The ${s} cannot be empty`:t.length===(null===(e=t.match(/\d/g))||void 0===e?void 0:e.length)?`!The ${s} cannot consist only of numbers`:/\s/.test(t)?`!The ${s} cannot contain more than one word`:/[~!@#$%*()_—+=|:;"'`<>,.?/^]/.test(t)?`!The ${s} cannot contain service symbols`:(this.removeTheErrorClass(),this.toggleIsValidate(),"Ok")}validateEmailInput(){var e;const t=this.getInputNode().value.trim(),s=t.match(/\S+(?=@)/);return this.addTheErrorClass(),!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@/.test(t)||!/@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)||1!==(null===(e=t.match(/@/))||void 0===e?void 0:e.length)||null===s||s[0].length>64||t.length>30?"Invalid email":(this.removeTheErrorClass(),this.toggleIsValidate(),"Ok")}toggleIsValidate(){this.isValidate=!0}clearDownInput(){this.getInputNode().value="",this.isValidate=!1,this.showStartMessage()}getInputNode(){return this.input.element}addTheErrorClass(){this.input.element.classList.add("input__field_error"),this.input.element.classList.remove("input__field_correct")}removeTheErrorClass(){this.input.element.classList.remove("input__field_error"),this.input.element.classList.add("input__field_correct")}getIsValidate(){return this.isValidate}showStartMessage(){this.error.element.innerText="!Required to fill",this.addTheErrorClass()}}t.Input=a},560:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegistrationPopup=void 0;const n=s(460),i=s(178),a=s(368);s(55);class r extends n.BaseBlock{constructor(e){super("div",["popup"]),this.output=e,this.popupBackground=new i.BaseComponent("div",["popup__background"]),this.formWrapper=new n.BaseBlock("div",["form-wrapper"]),this.form=new a.Form(this.output),this.popupBackground.element.addEventListener("click",(()=>{this.form.cancelButton.element.click()})),this.formWrapper.element.innerHTML='\n      <h2 class="popup__title">Register New Player</hw>\n    ',this.formWrapper.appendComponents([this.form]),this.appendComponents([this.formWrapper,this.popupBackground])}}t.RegistrationPopup=r},431:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreBlock=void 0;const n=s(460),i=s(691);s(22);class a extends n.BaseBlock{constructor(){super("div",["score-block"]),this.userList=new n.BaseBlock("div"),this.appendComponents([this.userList])}setUserList(e){e&&(this.userList=new n.BaseBlock("div"),e.forEach((e=>{this.userList.appendComponents([new i.User(e)])})))}refreshScoreBlock(e){var t;null===(t=this.element.lastElementChild)||void 0===t||t.remove(),this.setUserList(e),this.element.append(this.userList.element)}}t.ScoreBlock=a},535:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScorePopup=void 0;const n=s(460),i=s(178),a=s(876);s(468);class r extends n.BaseBlock{constructor(){super("div",["score-popup","score-popup__hidden"]),this.background=new i.BaseComponent("div",["score-popup__background"]),this.popup=new n.BaseBlock("div",["score-popup__popup"]),this.messageField=new i.BaseComponent("div",["score-pop__message-field"]),this.confirmButton=new a.NavButton(["score-popup__button"],"best score"),this.message="Congratulations! You successfully found all matches on ",this.confirmButton.element.innerText="Ok",this.confirmButton.element.addEventListener("click",(()=>this.element.classList.add("score-popup__hidden"))),this.background.element.addEventListener("click",(()=>this.confirmButton.element.click())),this.popup.appendComponents([this.messageField,this.confirmButton]),this.appendComponents([this.background,this.popup])}showMessage(e){this.messageField.element.innerText="0"===e[0]?`${this.message+e} seconds`:`${this.message+e} minutes`}showPopup(e){this.showMessage(e),this.element.classList.remove("score-popup__hidden")}}t.ScorePopup=r},152:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsMenu=void 0;const n=s(460),i=s(178);s(756);class a extends n.BaseBlock{constructor(e,t,s){super("div",["settings-menu"]),this.caption=new i.BaseComponent("div",["settings-menu__caption"]),this.select=new n.BaseBlock("select",["settings-menu__select"]),this.optionsTitle=new i.BaseComponent("option"),this.caption.element.innerText=e,this.optionsTitle.element.innerText=t,this.optionsTitle.element.setAttribute("disabled","disabled"),this.optionsTitle.element.setAttribute("selected","selected"),this.select.appendComponents([this.optionsTitle]),this.select.appendComponents(s.map((e=>new i.BaseComponent("option",[],e)))),this.appendComponents([this.caption,this.select])}getMenuNode(){return this.select.element}}t.SettingsMenu=a},609:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stopwatch=void 0;const n=s(460);s(236);class i extends n.BaseBlock{constructor(){super("div",["stopwatch"]),this.interval=null,this.time=0,this.element.innerText="0:00"}start(){this.interval=setInterval((()=>this.tick()),1e3)}tick(){this.time++;const e=`${Math.floor(this.time/60)}`,t=""+this.time%60;this.element.innerText=`${e}:${1===t.length?`0${t}`:t}`}stop(){this.interval&&(clearInterval(this.interval),this.interval=null)}reset(){this.element.innerText="0:00",this.time=0}getTime(){return this.time}getTextContent(){return this.element.textContent||"0:00"}}t.Stopwatch=i},691:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;const i=s(460),a=s(178);s(620);const r=n(s(522));class o extends i.BaseBlock{constructor(e){super("div",["user"]),this.user=e,this.userInfo=new i.BaseBlock("div",["user__info"]),this.userScore=new i.BaseBlock("div",["user__score"]);const t=new a.BaseComponent("img",["user__avatar"]);t.element.src=this.user.avatar?`data:image/png;base64,${this.user.avatar}`:r.default,this.userInfo.appendComponents([t,new a.BaseComponent("div",["user__name"],`${this.user.firstName} ${this.user.lastName}`),new a.BaseComponent("div",["user__email"],`${this.user.email}`)]),this.userScore.appendComponents([new a.BaseComponent("div",["user__title"],"Score:"),new a.BaseComponent("div",["user__result"],`${this.user.score}`)]),this.appendComponents([this.userInfo,this.userScore])}}t.User=o},894:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AboutGamePage=void 0;const i=s(460),a=s(715);s(446);const r=n(s(198)),o=n(s(390)),c=n(s(640));class l extends a.BasePage{constructor(){super("main",["main"],[],"about-game"),this.mainContentWrapper=new i.BaseBlock("div",["main__content-wrapper"]),this.element.innerHTML='\n      <h2 class="main__title">How to play?</h2>\n    ',this.mainContentWrapper.element.innerHTML=`\n      <ul class="rules-list">\n        <li class="rules-list__item rules-list__item_item1">\n          <div class="rules-list__count">1</div>\n          <p class="rules-list__text">Register new player in game</p>\n        </li>\n        <li class="rules-list__item rules-list__item_item2">\n          <div class="rules-list__count">2</div>\n          <p class="rules-list__text">Configure your game settings</p>\n        </li>\n        <li class="rules-list__item rules-list__item_item3">\n          <div class="rules-list__count">3</div>\n          <p class="rules-list__text">Start you new game! Remember card positions and match it before times up</p>\n        </li>\n      </ul>\n      <div class="instruction">\n        <img class="instruction__img instruction__img_img1" src=${r.default} alt="register form">\n        <img class="instruction__img instruction__img_img2" src=${c.default} alt="settings button">\n        <img class="instruction__img instruction__img_img3" src=${o.default} alt="game page">\n      </div>\n    `,this.appendComponents([this.mainContentWrapper])}}t.AboutGamePage=l},577:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BestScorePage=void 0;const n=s(715),i=s(431);class a extends n.BasePage{constructor(){super("main",["main"],[],"best-score"),this.scoreBlock=new i.ScoreBlock,this.element.innerHTML='\n      <h2 class="main__title">Best players</h2>\n    ',this.appendComponents([this.scoreBlock])}}t.BestScorePage=a},637:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function r(e){try{c(n.next(e))}catch(e){a(e)}}function o(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,o)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const i=s(351);s(731);const a=s(715),r=s(609),o=s(178);class c extends a.BasePage{constructor(){super("div",["game"],[],"start-game"),this.cardField=new i.CardField,this.stopwatch=new r.Stopwatch,this.gameInterval=null,this.isGameStart=!1,this.counterStartGame=0,this.cap=new o.BaseComponent("div",["game__cap"]),this.appendComponents([this.cap]),this.appendComponents([this.stopwatch,this.cardField])}startGame(){return n(this,void 0,void 0,(function*(){this.isGameStart=!0;const e=++this.counterStartGame;return this.handleClickEvent(),this.stopwatch.reset(),yield this.cardField.refreshCardField(),!!this.isGameStart&&e===this.counterStartGame&&(this.stopwatch.start(),yield this.waitGameEnd(),!0)}))}setCardType(e){this.cardField.setCardType(e.value?e.value:"cats")}setDifficulty(e){this.cardField.setDifficulty(e.value?+e.value:4)}waitGameEnd(){return new Promise((e=>{this.gameInterval=setInterval((()=>{this.cardField.checkGameEnd()&&e()}),1e3)}))}stopGame(){return this.isGameStart=!1,this.handleClickEvent(),this.gameInterval&&(this.stopwatch.stop(),clearInterval(this.gameInterval),this.gameInterval=null),[this.cardField.getPairs(),this.stopwatch.getTime()]}handleClickEvent(){this.cap.element.classList.toggle("game__cap_top",!this.isGameStart)}}t.Game=c},863:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsPage=void 0;const n=s(152),i=s(715);s(518);class a extends i.BasePage{constructor(){super("main",["settings"],[],"game-settings"),this.cardsSettings=new n.SettingsMenu("Game cards","select game cards type",["cats","animals"]),this.difficultySettings=new n.SettingsMenu("Difficulty","select game type",["4","6","8"]),this.appendComponents([this.cardsSettings,this.difficultySettings])}getSettingsMenu(){return[this.cardsSettings.getMenuNode(),this.difficultySettings.getMenuNode()]}}t.SettingsPage=a},460:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBlock=void 0;const n=s(178);class i extends n.BaseComponent{constructor(e="div",t=[],s=[]){super(e,t),this.children=s,this.appendComponents(this.children)}appendComponents(e){e.forEach((e=>{this.element.append(e.element)})),this.children=this.children.concat(e)}}t.BaseBlock=i},124:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseButton=void 0;const n=s(178);class i extends n.BaseComponent{constructor(e=[],t=""){super("button",e),this.innerText=t,this.element.innerText=t}}t.BaseButton=i},178:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[],s=""){this.element=document.createElement(e),this.element.classList.add(...t),this.element.innerText=s}}},715:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BasePage=void 0;const n=s(460);class i extends n.BaseBlock{constructor(e="div",t=[],s=[],n){super(e,t,s),this.name=n}}t.BasePage=i},570:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultAvatarBase64=void 0,t.defaultAvatarBase64="iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/\n  rhtAAAFN0lEQVRYR91YXYhUZRh+nnPO2Fo7u2z2iwV\n  rWF1YCkVpZqnQRXURlEQmhNjF9iMbzM45sytGO17Yu\n  p4zMwvbSgn9CZVBGHRjF0KamYURuFKERgolZSbb7ij\n  rzpxz3vhsJ2ZmZ845s24mfZdz3u/5nu/9+553iMt88\n  TLnh/83wY6OjlhbW9s9vu+vEZFFJK9XERGRUyQPa5r\n  2/sjIyKHt27cXpxuphj24YcOGOa7r3gFgs4gsJRmGI\n  SJyEMDG8fHxI0NDQ2caIRsG/g9WOp1uOXv27KMkOwC\n  sbOSQMts9IvKmruu7+/v7R6NgRCJoWdZdALoAPAFgd\n  hTgAJtxALuKxWJ2YGDg2zCsUIKJRGKurutfk7wRgBY\n  GGPG7LyK/ep63OJfLnQzaE0hQkTMM4ziAWACIT/K0i\n  HwvIoMq4Uh2apq2QESuDbmU67puexDJugRVWEXkE5J\n  zg24oIrtIbrZtuyJck/s3klRpUXeJyEmSj1XvL22oS\n  bC7u7vV9/0hAE8HeUBEfiC50rbt32oxsCzrBgB7ACw\n  IigCAnZqmvVircGoSNE1zNcm3IhTEMtu2DwR5KJlMP\n  qhp2r6Q3BwXkWcdx9lZbTeFYCKRuNowjA8BPBSW8Lq\n  uz9uyZcuJILuenp52z/NUHgcukp97nrcqk8n8UW44h\n  aBlWcsB7A0DVN9nkqDCE5GVjuNUnD2FYCqVOqBeiCg\n  EReQWx3ECvWOa5jySP0XE+9JxnPvrelC9ra2trRNAZ\n  BHxkm3bg0GHW5b1AoBtEQnK2NjYFeVvd4UHu7u7l/q\n  +H5j0VQeJruvz+/r6jpOU8m+qHaZSqVsAHGvgwvA87\n  75sNvtVzTZjWdZrANZHuW2Zze8ikhSR/fF4/Gf1ez6\n  fv5nkAyQzAK5rEO9127aV1y+sCg+mUqn9IrKsQUBlf\n  k5EDgG4QBCAIngvgCsbxRKRijysIGhZ1lEAtzYKOpP\n  2JI9u3br19noh/s8Jisgxx3Fuq0nQNM39JBsJsQrtY\n  ZInRKRYKpS/9QJnAWgXkTtJNkf1cliIoxSJEizfkXx\n  XEXNddzgej5/YtGlToZxEb2/vrEKh0F4oFBZqmqaIr\n  iWp3uQwiVe/SMLajIgoabWmUCjsbWtrO5NOp90onkm\n  n08bIyMicWCy2nOQHQQIksM2oRt3S0jJRa85QAtP3/\n  cXZbLZUqVG4TbHp7Oy8qampSVW8UjrVS0ZHR+s3amV\n  tmuYXJCueGwB11cZ0WFqW9RSAt2uopYO2bVc8s1Pyw\n  TTNFSQ/qzr4lO/76zKZzO7pEKrek0wmHyH5DsmKJh5\n  JLKixslgsfkRyRRmwByDnuu4ruVxODT3TXolEYnYsF\n  usVEVMJojKgfYZhrOrr66sYSxsSrEpUep63c7ok0+l\n  0Uz6ff1LTtB1VN1SXXmfbttKhFathyS8itq7r7/X39\n  x9uxI1dXV2LdF1fDaCnap+vJH+xWFw/MDDwZySCyih\n  gaPJEZBjAG57n7QjzpgqpYRjPiMjzJBdWhVWJ1MaHp\n  tItJsdOJemNGt46B0Dly7Dv+1Y8Hv+x1BdV38vn8/M\n  1TbMBKFJzAFxVA8M9f/78vMHBwV/qRSOsq+PfHNwnJ\n  iaWBJFTpEMJlsINIAng8QiTXlhqqoL4GECm3ixcDhC\n  JoNowOSs/DOC5i/jzSOnNba7rflqrIGrdLDLB0ubJP\n  qkUyqsAloRFQSkLTdMOuq77Mskj1WNlmLsbJlgOqN7\n  u5ubmu3VdXysiqhiumSR8muSwiOwYGxv75pL+gRl24\n  5n+flEenGkyM5KDl4JU+Rl/ATt5bEcewhR/AAAAAEl\n  FTkSuQmCC"},876:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NavButton=void 0;const n=s(124);class i extends n.BaseButton{constructor(e=[],t){super(e,t),this.pageHash=t.toLowerCase().split(" ").join("-"),this.element.addEventListener("click",(()=>{window.location.hash=this.pageHash}))}}t.NavButton=i},522:(e,t,s)=>{e.exports=s.p+"assets/283961a3dbfd3dd58825.png"},390:(e,t,s)=>{e.exports=s.p+"assets/4e71690999fed273d8a7.png"},198:(e,t,s)=>{e.exports=s.p+"assets/f3043ca9fba619837625.png"},640:(e,t,s)=>{e.exports=s.p+"assets/b2b54ec11c41948a135e.png"}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,s),a.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{const e=s(752);window.addEventListener("DOMContentLoaded",(()=>new e.App(document.body)))})()})();